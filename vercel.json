{
  "version": 2,
  "public": true,
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "Content-Encoding",
          "value": "br"  // Use Brotli compression for best performance
        },
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"  // Cache static assets for 1 year
        },
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"  // Security header to prevent MIME sniffing
        },
        {
          "key": "X-Frame-Options",
          "value": "DENY"  // Prevent clickjacking
        },
        {
          "key": "X-XSS-Protection",
          "value": "1; mode=block"  // XSS protection
        },
        {
          "key": "Strict-Transport-Security",
          "value": "max-age=63072000; includeSubDomains; preload"  // Enforce HTTPS
        },
        {
          "key": "Referrer-Policy",
          "value": "no-referrer-when-downgrade"  // Control referrer information
        },
        {
          "key": "Permissions-Policy",
          "value": "geolocation=(self), microphone=()"  // Control use of features like geolocation
        }
      ]
    },
    {
      "source": "/index.html",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "no-cache"  // Ensure HTML is always fresh
        }
      ]
    }
  ],
  "redirects": [
    {
      "source": "http://alexander-holm.com(.*)",
      "destination": "https://alexander-holm.com$1",
      "permanent": true  // Redirect HTTP to HTTPS
    },
    {
      "source": "/(.*)",
      "destination": "https://www.alexander-holm.com/$1",
      "statusCode": 308  // Redirect non-www to www with 308 status
    }
  ],
  "rewrites": [
    {
      "source": "/",
      "destination": "/index.html"  // Serve index.html at the root
    }
  ],
  "routes": [
    {
      "src": "/.*",
      "status": 404,
      "dest": "/404.html"  // Custom 404 page
    }
  ],
  "cleanUrls": true,  // Enable clean URLs (removes .html extension)
  "trailingSlash": false,  // Ensure URLs don't have a trailing slash
  "compression": {
    "brotli": true,
    "gzip": true  // Enable both Brotli and Gzip compression
  },
  "dnsPrefetchControl": {
    "allow": true  // Enable DNS prefetching for faster DNS resolution
  }
}
